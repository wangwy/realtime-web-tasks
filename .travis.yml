language: node_js
node_js:
- 0.10
before_install:
- git config --global user.name "Goodow Dev"
- git config --global user.email "dev@goodow.com"
- cd gh-pages && git pull origin gh-pages && git remote set-url origin https://${GH_TOKEN}@github.com/goodow/realtime-web-tasks.git
- cd ${TRAVIS_BUILD_DIR}
before_script:
- bower install
after_success:
- cd gh-pages
- rm -rf `find . -maxdepth 1 -name "*" ! -name ".git*" ! -name "CNAME"`
- cp -r ../app/* .
- git add . && git commit -a -m "Generated by goodow/realtime-web-tasks@${TRAVIS_COMMIT}"
- test ${TRAVIS_PULL_REQUEST} == "false" && git push -f origin HEAD:gh-pages
- cd ${TRAVIS_BUILD_DIR}
env:
  global:
  - secure: SR4FBXRQTPT5MgpxPW9tdfVxjKqFx3vAjSD7fa4RFWT6gOEdAhOj/CTrfSQduBZZuITAjLtu5YRaYO8+s31a88pLrhWDRh9f7CHldFszMFVZ9X7pVK3NP7LuJeS99yerDcGgibLxLSom2evUD4XaH0GxopmqQtqOstw0aoI5Zho=
  - secure: gauDn8nayVoWdrkAOrh1OTpeWqkMdnHrpKlZXWAYgJwgEu99CKK5BMWhujPzivLAQ2UI9Jl562gCtncS9hMc1OWJNQPPhWZOmborGlzDwLCwhILA8XpLUdNFtRcfoyG/XuldLhqN/9s8PXTrrcjRhytcQE6NNvZcUc+SPWvTPcs=
